<script type="application/javascript">
    const address = document.getElementById('address');
    const button = document.getElementById('connect');
    const error = document.getElementById('error');

    address.addEventListener('keyup', () => {
        address.validity.valid ? button.removeAttribute('disabled') : button.setAttribute('disabled', 'disabled');
    });

    document.querySelector('form').addEventListener('submit', (event) => {
        event.preventDefault();
        error.innerText = '';
        Homey.showLoadingOverlay();
        Homey.emit('connect', address.value).then((msg) => {
            if (msg.error) {
                error.innerText = msg.error;
            }
            Homey.hideLoadingOverlay();
        });
    });
</script>

<style>
    #address {
        margin-bottom: 1em;
    }

    #connect {
        width: 100%;
    }

    #error {
        margin-top: 1em;
        color: red;
    }
</style>

<h1 class="homey-title" data-i18n="pair.address.title"></h1>
<p data-i18n="pair.address.description"></p>
<form class="homey-form">
    <input class="homey-form-input" id="address" type="text" required>
    <button class="homey-button-primary" id="connect" disabled="disabled" data-i18n="pair.address.submit"></button>
</form>
<p id="error"></p>